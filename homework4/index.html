<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LLN Simulation - Homework</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    :root {
      --bg: #0f1724;
      --card: #0b1220;
      --accent: #7dd3fc;
      --radius: 14px;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: #e6eef6;
      margin: 0;
      padding: 20px;
    }
    .wrap { max-width: 1000px; margin: 0 auto; }
    h1,h2,h3,h4 { color: var(--accent); margin-bottom: 10px; }
    p { margin-bottom: 12px; }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 0 0 1px rgba(255,255,255,0.05) inset;
    }

    .plot-container { width: 100%; height: 400px; margin-top: 12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Simulation of the Law of Large Numbers (LLN)</h1>
    </header>

    <!-- Section 1: Trajectories -->
    <div class="card">
      <h2>Relative Frequency Trajectories</h2>
      <p>Each line represents a simulated trajectory of the relative frequency <strong>f(n)</strong> over <strong>n</strong> trials. As predicted by the Law of Large Numbers, all trajectories tend to converge towards the theoretical probability <strong>p</strong>.</p>
      <div id="lln-trajectories" class="plot-container"></div>
    </div>

    <!-- Section 2: Empirical Distribution -->
    <div class="card">
      <h2>Final Empirical Distribution</h2>
      <p>Histogram of the final <strong>f(n)</strong> values across all <strong>m</strong> trajectories. As <strong>n</strong> increases, the distribution concentrates around <strong>p</strong>, demonstrating empirical convergence.</p>
      <div id="lln-histogram" class="plot-container"></div>
    </div>
  </div>

  <script>
    // Simulation parameters
    const m = 50;   // number of trajectories
    const n = 1000; // trials per trajectory
    const p = 0.5;  // success probability

    const trajectories = [];
    const finalFrequencies = [];

    for (let i = 0; i < m; i++) {
      let successes = 0;
      const freq = [];
      for (let j = 1; j <= n; j++) {
        if (Math.random() < p) successes++;
        freq.push(successes / j);
      }
      trajectories.push({
        x: Array.from({length: n}, (_, k) => k + 1),
        y: freq,
        mode: 'lines',
        line: { width: 1, color: 'rgba(125,211,252,0.3)' },
        showlegend: false
      });
      finalFrequencies.push(freq[n - 1]);
    }

    // Plot LLN trajectories
    Plotly.newPlot('lln-trajectories', trajectories, {
      title: 'Relative Frequency f(n) Trajectories',
      paper_bgcolor: '#0b1220',
      plot_bgcolor: '#0b1220',
      font: { color: '#e6eef6' },
      xaxis: { title: 'Number of Trials (n)', color: '#e6eef6' },
      yaxis: { title: 'Relative Frequency f(n)', range: [0, 1], color: '#e6eef6' },
      margin: { t: 40 },
      displayModeBar: false
    });

    // Plot histogram of final frequencies
    Plotly.newPlot('lln-histogram', [{
      x: finalFrequencies,
      type: 'histogram',
      marker: { color: '#7dd3fc' },
      nbinsx: 20
    }], {
      title: 'Empirical Distribution of Final f(n)',
      paper_bgcolor: '#0b1220',
      plot_bgcolor: '#0b1220',
      font: { color: '#e6eef6' },
      xaxis: { title: 'Final f(n)', color: '#e6eef6' },
      yaxis: { title: 'Count', color: '#e6eef6' },
      margin: { t: 40 },
      displayModeBar: false
    });
  </script>
</body>
</html>
